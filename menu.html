<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Menu</title>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>

        <section id="menu_header">
            <header>
                <h1>Menu</h1>
            </header>
        </section>

        <!--Every page on the project will have this horizontal navigation bar-->
        <ul class="topnav">
            <li><a href="main.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="menu.html" class="active">Menu</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="index.html">Bio</a></li>
        </ul>

        <div id="menu">
            <div class="menuchunk">
                <div class="menusection">
                    <h2>Appetizer</h2>
                    <div class="fooditem">
                        <img src="img/menuimages/onigiri.jpg">
                        <div class="itemcontent">
                            <h4>Onigiri <span class="price">$4.00</span></h4>
                            <p class="description">Delicious seasoned rice with savory fillings and seaweed wrapping. A traditional Japanese delight!</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/sushi.jpg">
                        <div class="itemcontent">
                            <h4>5 Sushi Platter <span class="price">$10.00</span></h4>
                            <p class="description">2 sushi roll slices carefully prepared with fish, seaweed, rice, and seasonings,
                                and 3 pieces of nigiri, including smoked salmon, tuna, and sushi rice.</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/fishcake.jpg">
                        <div class="itemcontent">
                            <h4>Korean Fish Cake <span class="price">$6.00</span></h4>
                            <p class="description">Savory, tender fish cakes infused with Korean spices, a delightful appetizer bursting with flavor!</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/misosoup.jpg">
                        <div class="itemcontent">
                            <h4>Miso Soup <span class="price">$4.00</span></h4>
                            <p class="description">Classic soup with tofu, seaweed, and miso paste.</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/fries.jpg">
                        <div class="itemcontent">
                            <h4>Fries <span class="price">$5.00</span></h4>
                            <p class="description">Crispy potato slices fried unti golden brown with light salt.</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                </div>

                <div class="menusection">
                    <h2>Breakfast</h2>
                    <div class="fooditem">
                        <img src="img/menuimages/eggfriedrice.jpg">
                        <div class="itemcontent">
                            <h4>Egg Fried Rice <span class="price">$8.50</span></h4>
                            <p class="description">A classic fusion of fluffy rice, scrambled eggs, and savory seasonings.</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/omelette.jpg">
                        <div class="itemcontent">
                            <h4>Omelette <span class="price">$8.00</span></h4>
                            <p class="description">Fluffy eggs folded around a yummy filling. A satisfying breakfast option!</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/instantnoodle.jpg">
                        <div class="itemcontent">
                            <h4>Instant Noodle w/Egg <span class="price">$7.00</span></h4>
                            <p class="description">Quick, flavorful noodles in a savory broth with a runny egg.</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/pancake.jpg">
                        <div class="itemcontent">
                            <h4>Fluffy Pancakes <span class="price">$9.00</span></h4>
                            <p class="description">Fluffy stacks of golden goodness, a timeless breakfast treat!</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/donut.jpg">
                        <div class="itemcontent">
                            <h4>Donut <span class="price">$5.00</span></h4>
                            <p class="description">Irresistable round dough with glaze!</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="menuchunk">
                <div class="menusection">
                    <h2>Lunch/Dinner</h2>
                    <div class="fooditem">
                        <img src="img/menuimages/ramen.jpg">
                        <div class="itemcontent">
                            <h4>Ramen <span class="price">$10.00</span></h4>
                            <p class="description">Hearty noodles in flavorful broth, a Japanese comfort classic!</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/chickenstirfry.jpg">
                        <div class="itemcontent">
                            <h4>Chicken Stir Fry <span class="price">$9.50</span></h4>
                            <p class="description">Tender chicken and crisp vegetables wok-tossed in savory sauce and noodles.</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/hamburger.jpg">
                        <div class="itemcontent">
                            <h4>Hamburger <span class="price">$9.50</span></h4>
                            <p class="description">Juicy beef patty with fresh toppings on a soft bun, a classic favorite!</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/pizza.jpg">
                        <div class="itemcontent">
                            <h4>Pizza <span class="price">$10.50</span></h4>
                            <p class="description">Oven-baked perfection topped with savory sauce, gooey cheese, and toppings.</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/chickenwings.jpg">
                        <div class="itemcontent">
                            <h4>Parmesan Wings <span class="price">$9.50</span></h4>
                            <p class="description">Crispy chicken wings coated in savory Parmesan cheese, a flavorful delight!</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                </div>

                <div class="menusection">
                    <h2>Dessert</h2>
                    <div class="fooditem">
                        <img src="img/menuimages/vanillacake.jpg">
                        <div class="itemcontent">
                            <h4>Vanilla Cake <span class="price">$6.00</span></h4>
                            <p class="description">Moist and fluffy layers of cake infused with delicate vanilla flavor.</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/tanghulu.jpg">
                        <div class="itemcontent">
                            <h4>Strawberry Tanghulu <span class="price">$5.00</span></h4>
                            <p class="description">Juicy strawberries coated in a crisp, sweet glaze.</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/tempuraicecream.jpg">
                        <div class="itemcontent">
                            <h4>Tempura Ice Cream <span class="price">$5.50</span></h4>
                            <p class="description">Creamy ice cream wrapped in a crispy, golden tempura shell, a delightful fusion of textures!</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/icecreamrolls.jpg">
                        <div class="itemcontent">
                            <h4>Ice Cream Rolls <span class="price">$5.00</span></h4>
                            <p class="description">Creamy, freshly made ice cream rolled into delightful spirals.</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                    <div class="fooditem">
                        <img src="img/menuimages/milkshake.jpg">
                        <div class="itemcontent">
                            <h4>Milkshake <span class="price">$5.00</span></h4>
                            <p class="description">Rich, creamy goodness blended to perfection, a timeless classic.</p>
                            <button class="addbutton">Add to cart</button>
                            <button class="removebutton">Remove from cart</button>
                            <p>In cart: <span class="incart">0</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="menutocheckout">
            <a href="checkout.html">Checkout</a>
        </div>

        <footer>
            <p>
                <img src="img/other/uhlogo.jpg"/><br>
                &copy; 2024 Crazy McNew's Cafeteria. All rights reserved.</p>
        </footer>

        <script>
            // FUNCTIONS SPACE --------------------------------------------------------------------------------------------------------
            function getFoodName(heading) {
                foodName = heading.textContent;
                foodName = foodName.split(" ");
                foodName= foodName.slice(0, (foodName.length - 1));
                foodName = foodName.join(" ");

                return foodName;
            };
            
            // Creation of food numbers dictionary (WILL BE USED TO CALCULATE TOTAL PRICE ALONG WITH FOOD PRICES) ---------------------
            let foodNumbersDict = new Object();

            // Create list of food names
            let foodNameTags = document.getElementsByTagName("h4");
            let foodNames = [];

            for(i = 0; i < foodNameTags.length; i++) {
                // Get the food name from each tag
                foodNames[i] = getFoodName(foodNameTags[i]);
            };

            // Create list of amount of each food
            let inCartTags = document.getElementsByClassName("incart");
            let foodNumbers = []

            for(i = 0; i < inCartTags.length; i++) {
                // Get the number in cart from each tag
                foodNumbers[i] = parseInt(inCartTags[i].textContent);
            };

            // Modify food numbers dictionary with lists just created
            for(i = 0; i < foodNames.length; i++) {
                foodNumbersDict[foodNames[i]] = foodNumbers[i];
            };

            // Creation of food price dictionary (WILL BE USED TO CALCULATE TOTAL PRICE ALONG WITH FOOD NUMBERS) ----------------------
            let foodPriceDict = new Object();

            // Create list of food prices
            let foodPrices = [];

            for(i = 0; i < foodNameTags.length; i++) {
                // Appends the price to the price list
                foodPrice = foodNameTags[i].textContent;
                foodNameArray = foodPrice.split(" ");
                foodPrice = foodNameArray[foodNameArray.length -1];
                foodPrice = foodPrice.substring(1, foodPrice.length - 1);
                foodPrices[i] = parseFloat(foodPrice);
            };

            // Modify food prices dictionary with lists just created
            for(i = 0; i < foodNames.length; i++) {
                foodPriceDict[foodNames[i]] = foodPrices[i];
            };

            // Event listeners change the text content of in cart and the dictionary when clicked. ------------------------------------

            // Select all add buttons
            const addButtons = document.querySelectorAll(".addbutton");

            // Add event listener to each add button
            addButtons.forEach(function(button) {
                button.addEventListener("click", function() {
                    // Get the parent element of the clicked button
                    const foodItem = button.closest(".fooditem");
                    
                    // Find the corresponding h4 element and "In cart" span element
                    const foodHeading = foodItem.querySelector("h4");
                    const inCartSpan = foodItem.querySelector(".incart");

                    // Get the current name of the food and the current value from the "In cart" span
                    let foodName = getFoodName(foodHeading);
                    let currentValue = parseInt(inCartSpan.textContent);

                    // Check if currentValue is less than 5
                    if (currentValue < 5) {
                        // increase the value
                        currentValue ++;
                        
                        // Update dictionary with new foodName value and the content of the "In cart" span
                        foodNumbersDict[foodName] = currentValue;
                        inCartSpan.textContent = currentValue;
                    } else {
                        // Alert a message if there are too many in the cart
                        alert("Too much of this item in the cart.");
                    }
                });
            });

            // Select all remove buttons
            const removeButtons = document.querySelectorAll(".removebutton");

            // Add event listener to each remove button
            removeButtons.forEach(function(button) {
                button.addEventListener("click", function() {
                    // Get the parent element of the clicked button
                    const foodItem = button.closest(".fooditem");
                    
                    // Find the corresponding "In cart" span element
                    const inCartSpan = foodItem.querySelector(".incart");
                    
                    // Get the current value from the "In cart" span
                    let currentValue = parseInt(inCartSpan.textContent);
                    
                    // Check if currentValue is greater than 0
                    if (currentValue > 0) {
                        // Decrease the value
                        currentValue--;
                        
                        // Update dictionary with new foodName value and the content of the "In cart" span
                        foodNumbersDict[foodName] = currentValue;
                        inCartSpan.textContent = currentValue;
                    } else {
                        // Alert a message if there are no items in the cart
                        alert("None of this item in the cart.");
                    }
                });
            });

            // Once the checkout link is clicked, a string version of the food numbers and price is stored in the local storage
            const checkoutLink = document.getElementById("menutocheckout");
            checkoutLink.addEventListener("click", function() {
                localStorage.setItem('foodNumbersDictionary', JSON.stringify(foodNumbersDict));
                localStorage.setItem('foodPriceDictionary', JSON.stringify(foodPriceDict));
            });

        </script>
    </body>
</html>